---
# yaml-language-server: $schema=https://json.schemastore.org/github-action.json
name: Go Version Detect
description: "Detects the Go version from the project's go.mod file or defaults to a specified version."
author: 'Ismo Vuorinen'

branding:
  icon: code
  color: blue

inputs:
  default-version:
    description: 'Default Go version to use if go.mod is not found.'
    required: false
    default: '1.22'

outputs:
  go-version:
    description: 'Detected or default Go version.'
    value: ${{ steps.parse-version.outputs.detected-version }}

runs:
  using: composite
  steps:
    - name: Parse Go Version
      id: parse-version
      uses: ivuorinen/actions/version-file-parser@main
      with:
        language: 'go'
        tool-versions-key: 'golang'
        dockerfile-image: 'golang'
        version-file: '.go-version'
        validation-regex: '^[0-9]+\.[0-9]+(\.[0-9]+)?$'
        default-version: ${{ inputs.default-version }}
